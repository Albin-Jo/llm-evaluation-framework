<div class="agent-detail-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="back-navigation">
      <button class="back-button" (click)="onBackClick()">
        <span class="back-icon">←</span> Back to Agents
      </button>
    </div>

    <div class="title-actions">
      <div class="title-section">
        <h1 class="page-title" *ngIf="agent">{{ agent.name }}</h1>
        <span *ngIf="agent" class="status-badge" [ngClass]="agent.is_active ? 'active' : 'inactive'">
          {{ agent.is_active ? 'Active' : 'Inactive' }}
        </span>
      </div>

      <div class="action-buttons" *ngIf="agent">
        <button class="action-button edit-button" (click)="onEditClick()">
          Edit Agent
        </button>
        <button class="action-button test-button" (click)="onTestClick()">
          Test Agent
        </button>
        <button class="action-button delete-button" (click)="onDeleteClick()">
          Delete Agent
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading agent details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-icon">❌</div>
    <p>{{ error }}</p>
    <qrac-button
      *ngIf="agentId"
      label="Try Again"
      type="secondary"
      (buttonClick)="loadAgent(agentId)">
    </qrac-button>
  </div>

  <!-- Agent Details -->
  <div *ngIf="agent && !isLoading" class="agent-details">
    <div class="info-cards">
      <!-- Basic Information Card -->
      <div class="info-card basic-info">
        <h2 class="card-title">Basic Information</h2>
        <div class="card-content">
          <div class="info-row">
            <span class="info-label">Description</span>
            <span class="info-value description-value">{{ agent.description || 'No description provided' }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Domain</span>
            <span class="info-value domain-badge">{{ agent.domain }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Model Type</span>
            <span class="info-value">{{ agent.model_type || 'Not specified' }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Version</span>
            <span class="info-value">{{ agent.version || '1.0.0' }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Created</span>
            <span class="info-value">{{ formatDate(agent.created_at) }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Last Updated</span>
            <span class="info-value">{{ formatDate(agent.updated_at) }}</span>
          </div>
          <div class="info-row tags-row" *ngIf="agent.tags && agent.tags.length > 0">
            <span class="info-label">Tags</span>
            <div class="tags-container">
              <span class="tag" *ngFor="let tag of agent.tags">{{ tag }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- API Configuration Card -->
      <div class="info-card api-config">
        <h2 class="card-title">API Configuration</h2>
        <div class="card-content">
          <div class="info-row full-width">
            <span class="info-label">API Endpoint</span>
            <span class="info-value endpoint">{{ agent.api_endpoint }}</span>
          </div>
          <div class="info-row" *ngIf="agent.integration_type">
            <span class="info-label">Integration Type</span>
            <span class="info-value">{{ agent.integration_type }}</span>
          </div>
          <div class="info-row" *ngIf="agent.auth_type">
            <span class="info-label">Auth Type</span>
            <span class="info-value">{{ agent.auth_type }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status</span>
            <span class="info-value status-value" [ngClass]="agent.is_active ? 'active-status' : 'inactive-status'">
              {{ agent.is_active ? 'Active' : 'Inactive' }}
            </span>
          </div>
        </div>
      </div>

      <!-- Configuration Card -->
      <div class="info-card config">
        <h2 class="card-title">Configuration</h2>
        <div class="card-content" *ngIf="agent.config">
          <pre class="config-json">{{ formatJson(agent.config) }}</pre>
        </div>
        <div class="card-content" *ngIf="!agent.config">
          <div class="empty-config">No configuration available</div>
        </div>
      </div>
    </div>
  </div>
</div>