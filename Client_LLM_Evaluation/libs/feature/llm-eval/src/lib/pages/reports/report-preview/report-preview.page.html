<!-- Path: libs/feature/llm-eval/src/lib/pages/reports/report-preview/report-preview.page.html -->
<div class="report-preview-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="back-navigation">
      <a (click)="backToReport()" class="back-link">
        <span class="back-icon">←</span> Back to Report Details
      </a>
    </div>

    <div class="title-actions">
      <div class="title-section">
        <h1 class="page-title" *ngIf="report">{{ report.name }}</h1>
      </div>

      <div class="action-buttons">
        <button class="action-button download-button" (click)="downloadReport()" [disabled]="isDownloading">
          <span *ngIf="isDownloading" class="spinner-sm"></span>
          Download
        </button>
        <button class="action-button send-button" (click)="sendReport()">
          Send Email
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading report preview...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-icon">❌</div>
    <p>{{ error }}</p>
    <div class="error-actions">
      <button class="action-button" (click)="loadReport(reportId)">Try Again</button>
      <button class="action-button" (click)="backToReport()">Back to Report</button>
    </div>
  </div>

  <!-- Preview Content -->
  <div *ngIf="previewHtml && !isLoading && !error" class="preview-content">
    <div class="report-document" [innerHTML]="previewHtml"></div>
  </div>

  <!-- Pagination -->
  <div *ngIf="previewHtml && !isLoading && !error" class="pagination-container">
    <div class="pagination-controls">
      <button class="pagination-button prev-button" disabled>
        Previous
      </button>
      <div class="page-info">Page 1 of 1</div>
      <button class="pagination-button next-button" disabled>
        Next
      </button>
    </div>
  </div>
</div>
