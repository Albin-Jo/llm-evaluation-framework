<!-- Path: libs/feature/llm-eval/src/lib/pages/agents/agents-detail/agents-detail.page.html -->
<div class="agent-detail-container">
  <!-- Back button and title -->
  <div class="detail-header">
    <button class="back-button" (click)="onBackClick()">
      <span class="back-icon">←</span> Back to Agents
    </button>

    <div class="actions-container">
      <button class="action-button edit-button" (click)="onEditClick()">
        Edit Agent
      </button>
      <button class="action-button delete-button" (click)="onDeleteClick()">
        Delete Agent
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading agent details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-icon">❌</div>
    <p>{{ error }}</p>
    <qrac-button
      *ngIf="agentId"
      label="Try Again"
      type="secondary"
      (buttonClick)="loadAgent(agentId)">
    </qrac-button>
  </div>

  <!-- Agent Details -->
  <div *ngIf="agent && !isLoading" class="agent-details">
    <div class="detail-header-section">
      <h1 class="agent-name">{{ agent.name }}</h1>
      <span class="status-badge" [ngClass]="agent.is_active ? 'active' : 'inactive'">
        {{ agent.is_active ? 'Active' : 'Inactive' }}
      </span>
    </div>

    <div class="detail-section">
      <div class="detail-card basic-info">
        <h2 class="section-title">Basic Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Description</span>
            <span class="info-value">{{ agent.description || 'No description provided' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Domain</span>
            <span class="info-value domain-badge">{{ agent.domain }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Model Type</span>
            <span class="info-value">{{ agent.model_type || 'Not specified' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Version</span>
            <span class="info-value">{{ agent.version || '1.0.0' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Created</span>
            <span class="info-value">{{ formatDate(agent.created_at) }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">Last Updated</span>
            <span class="info-value">{{ formatDate(agent.updated_at) }}</span>
          </div>
          <div class="info-item full-width" *ngIf="agent.tags && agent.tags.length > 0">
            <span class="info-label">Tags</span>
            <div class="tags-container">
              <span class="tag" *ngFor="let tag of agent.tags">{{ tag }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="detail-card configuration">
        <h2 class="section-title">API Configuration</h2>
        <div class="info-grid">
          <div class="info-item full-width">
            <span class="info-label">API Endpoint</span>
            <span class="info-value endpoint">{{ agent.api_endpoint }}</span>
          </div>
          <div class="info-item full-width" *ngIf="agent.config">
            <span class="info-label">Configuration</span>
            <pre class="config-json">{{ agent.config | json }}</pre>
          </div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2 class="section-title">Test Agent</h2>
      <p class="test-description">
        You can test this agent with sample input to verify its functionality before using it in evaluations.
      </p>
      <button class="test-button" (click)="onTestClick()">
        Test Agent
      </button>
    </div>
  </div>
</div>
